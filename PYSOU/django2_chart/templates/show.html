<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .chart-card {height: 350px;}
        #lineChart {width: 100%; height: 100%;}
    </style>
</head>
<body>
    <div class="container">
        <h2>시애틀 날씨 데이터프레임, 기술통계</h2>
        <div class="row g-4">
            <div class="col-lg-6">
                <h4>DataFrame 상위 5행</h4>
                {{head_html | safe}}
            </div>
            <div class="col-lg-6">
                <h4>기술통계</h4>
                {{stats_html | safe}}
            </div>
            <div class="col-lg-12">
                <div class="card chart-card">
                    <h4>월별 평균 최고 기온</h4>
                    <div id="lineChart"></div>
                </div>
                
            </div>
        </div>
    </div>
    <br/>
    <a href="{% url 'index' %}" class = "btn btn-outline-secondry">메인으로</a>

<!--Echart 적용-->
<script src="https://cdn.jsdelivr.net/npm/echarts@6.0.0/dist/echarts.min.js"></script>
<script>
    const labels = {{labels_json | safe}};
    const series = {{series_json | safe}};
    const el = document.getElementById("lineChart");
    const chart = echarts.init(el);

    const option = {
        tooltip:{trigger:'axis'},
        grid:{left:48, right:16, top:24, bottom:40},
        //카테고리형(범주형) x축 labels를 라벨로 사용
        xAxis:{type:'category', data:labels, axisLabel:{interval:'auto'}},
        //숫자형 y축 - 온도
        yAxis:{type:'value', name:'C'},
        series:[{name : '월평균 최고기온', type:'line', smooth:true, symbolSize:4, data:series}]
    };
    chart.setOption(option);
    window.addEventListener('resize', () => chart.resize()); // 반응형 GUI
    
</script>
</body>
</html>